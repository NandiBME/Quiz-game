.sidepanel__backdrop {
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.38);
  display: flex;
  justify-content: flex-end;
  align-items: stretch;
  z-index: 1200;
  animation: backdropFade 220ms ease;
}

.sidepanel__backdrop--closing {
  animation: backdropFadeOut 200ms ease forwards;
}

.sidepanel__surface {
  width: min(360px, 85vw);
  background: var(--panel-bg);
  color: var(--text);
  box-shadow: -12px 0 32px var(--panel-shadow);
  padding: 20px 22px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  transform-origin: right center;
  animation: swingInRight 320ms cubic-bezier(0.22, 1, 0.36, 1);
}

.sidepanel__surface--closing {
  animation: swingOutRight 320ms cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

.sidepanel__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 0 0 8px 0;
}

.sidepanel__close {
  border: none;
  background: transparent;
  font-size: 1.3rem;
  cursor: pointer;
  line-height: 1;
  color: var(--text);
}

.sidepanel__placeholder {
  margin: 0;
  color: var(--muted);
}

@keyframes swingInRight {
  0%   { transform: perspective(900px) translateX(40px) rotateY(-12deg); opacity: 0; }
  60%  { transform: perspective(900px) translateX(-4px) rotateY(2deg); opacity: 1; }
  100% { transform: perspective(900px) translateX(0) rotateY(0deg); opacity: 1; }
}

@keyframes swingOutRight {
  0%   { transform: perspective(900px) translateX(0) rotateY(0deg); opacity: 1; }
  40%  { transform: perspective(900px) translateX(12px) rotateY(-3deg); opacity: 0.9; }
  100% { transform: perspective(900px) translateX(60px) rotateY(-12deg); opacity: 0; }
}

@keyframes backdropFade {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@keyframes backdropFadeOut {
  from { opacity: 1; }
  to   { opacity: 0; }
}